<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Company</title>
   <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

      <link rel="stylesheet" href="css/style.css">
  <style>
  .ng-valid{
        border:1px solid rgb(92,184,92);
    }
    
</style>
 
</head>

<body ng-app="myApp" ng-controller="ngCntrl">


  <div style="background:rgba(225,225,225,0.5);position:absolute; width: 100%;height: 100%;z-index: 99;display: none" id="loading" >
  
    <img src="loading.gif" width="100%" style="position: absolute;z-index: 999;top: 0;right: 0;bottom: 0;left: 0;">
</div>

<div class="tabs">
  
   
  <input type="radio" id="tab1" name="tab-control" checked>
  <input type="radio" id="tab2" name="tab-control">
  <input type="radio" id="tab3" name="tab-control">  
  <input type="radio" id="tab4" name="tab-control">
  <ul style="/*width:500px*/; background-color:#222; line-height: 40px;">
    <li><label for="tab1" role="button"></svg><br><span>Company</span></label></li>
<!--     <li><label for="tab2" role="button"></svg><br><span>Documents</span></label></li>
    <li><label for="tab3" role="button"></svg><br><span>Notes</span></label></li>    
  <li><label for="tab4" role="button"></svg><br><span style="margin-right: 20px;">History</span></label></li> -->
  <li><label for="tab1" role="button"></svg><br><span></span></label></li>
    <li><label for="tab2" role="button"></svg><br><span></span></label></li>
    <li><label for="tab3" role="button"></svg><br><span></span></label></li>    
  <li><label for="tab4" role="button"></svg><br><span></span></label></li>
  <li><label for="tab1" role="button"></svg><br><span></span></label></li>
    <li><label for="tab2" role="button"></svg><br><span></span></label></li>
    <li><label for="tab3" role="button"></svg><br><span></span></label></li>    
  <li><label for="tab4" role="button"></svg><br><span></span></label></li> 
  <li > <button type="button" class="close clo " data-dismiss="modal" style="color: #ffff;margin-right: 20px;margin-bottom:10px ;font-size:35px " >&times;</button></li>
  </ul>
  <div class="slider"><div class="indicator"></div></div>
  <div class="content">
    <section>

<style type="text/css">
  .nav{
    border: none;
  }
  .nav-tabs > li > a:hover{
  
  
    background: rgb(204, 120, 12);
  color: #fff !important;
}
  .nav-tabs > li > a{

    border: 0px solid #fff;
    border-bottom: none;
     border-radius: 4px;
background: #fff;

 -webkit-transform: perspective(100px) rotateX(30deg);
 -moz-transform: perspective(100px) rotateX(30deg);
  }
  .nav-tabs > li > a:active{
background: rgb(43, 24, 99);
  }
  .nav-tabs > li > a::after{
    background: none;
  }
  .nav-tabs > li.active > a, .nav-tabs > li > a:hover{
    background: rgb(43, 24, 99);
    color: #fff !important;
  }
  .nav-tabs>li.active>a, .nav-tabs>li.active>a:focus, .nav-tabs>li.active>a:hover{
  	background: rgb(43, 24, 99);
  	border: 3px solid #fff;
  	border-bottom: none; 
  }

</style>

   <div class="container-fluid jumbotron mappfull " style="margin-top:-30px;padding-bottom: 0px;margin-bottom: 0px "><!--Start of container fluid-->
    <div class="col-sm-4" style="margin-top:0px;padding-bottom: 0px;margin-bottom: -10px ">
    <ul class="nav nav-tabs">
    <li class="active"><a data-toggle="tab" href="#details"><b>Details</b></a></li>
    <li><a data-toggle="tab" href="#data"><b>Settings</b></a></li>
     
    
    </ul>
    </div>
  </div>
  
   
 








<form name="form">
<div class="tab-content" >
  <div class="tab-pane fade in active"  id="details">
  <div class="container-fluid jumbotron mappfull ">
     	<div class="row"><!-- satart of row -->

        <div class="col-sm-12"><!-- Start of col-12 -->

          <div class="col-sm-3">
           
          <label class="">Parent Company<span style="color:red;">*</span></label>
          <input type="text" name="parentCompany" placeholder="Enter Parent Company Name" class="form-control" ng-model="com.parentCompny" ng-required="true">
            <div ng-show="form.$submitted || form.parentCompany.$touched">
                <span style="color:orange" ng-show="form.parentCompany.$error.required"> Please enter Parent Company</span>
            </div>
           
           </div>
          <label><input type="checkbox" value="">subsidery</label>

        </div><!-- End of col-12 -->


        <div class="col-sm-12"><!-- start of col-sm 12 -->

          <div class="col-sm-3">
           
          <label class="">Child Company<span style="color:red;">*</span></label>
          <input type="text" name="childCompany" placeholder="Enter Company Name" class="form-control" ng-model="com.company" ng-required="true">

              <div ng-show="form.$submitted || form.childCompany.$touched">
                <span style="color:orange" ng-show="form.childCompany.$error.required"> Please enter Child Company</span>
            </div>

          </div>

          <div class="col-sm-2">
         
          <label class="">Alias<span style="color:red;">*</span></label>
          <input type="text" name="alias" placeholder="Enter Alise" class="form-control" ng-model="com.alias" ng-required="true">


              <div ng-show="form.$submitted || form.alias.$touched">
                <span style="color:orange" ng-show="form.alias.$error.required"> Please enter Alias</span>
            </div>


          </div>

          <div class="col-sm-3">
          
          <label class="">Legal enity<span style="color:red;">*</span></label>
          <input type="text" name="leglEntity" placeholder="Enter Legal Entity" class="form-control"  ng-model="com.leglEntity" ng-required="true">


              <div ng-show="form.$submitted || form.leglEntity.$touched">
                <span style="color:orange" ng-show="form.leglEntity.$error.required"> Please Legal entity</span>
            </div>


          </div>

          <div class="col-sm-2">
         
          <label class="">Country<span style="color:red;">*</span></label>

          <select class="form-control" ng-model="country" name="country" ng-change="countrySelect(country)" ng-required="true">
            <option value="">Select Country</option>
            <option ng-repeat="x in countryData" value="{{x}}">{{x.name}}</option>
          </select>

              <div ng-show="form.$submitted || form.country.$touched">
                <span style="color:orange" ng-show="form.country.$error.required"> Please Select Country</span>
            </div>


          </div>

          <div class="col-sm-2">
          
          <label class="">State<span style="color:red;">*</span></label>
         <select class="form-control" ng-model="state" name="state" ng-required="true">
             <option value="">Select State</option>
            <option ng-repeat="x in stateShow" value="{{x}}">{{x.name}}</option> 
          </select>

            <div ng-show="form.$submitted || form.state.$touched">
                <span style="color:orange" ng-show="form.state.$error.required"> Please Select state</span>
            </div>


          </div>


        </div><!-- End of col-sm 12 -->


        <div class="col-sm-12"><!-- Start of 3 rd col 12 -->

           <div class="col-sm-3">
         
          <label class="">Address Line 1<span style="color:red;">*</span></label>
          <input type="text" name="addressLin1" placeholder="Enter Address Line 1" class="form-control"  ng-model="com.addressLin1" ng-required="true">

             <div ng-show="form.$submitted || form.addressLin1.$touched">
                <span style="color:orange" ng-show="form.addressLin1.$error.required"> Please Select addressLin1</span>
            </div>            

          </div> 
          <div class="col-sm-3">
         
          <label class="">Address Line 2</label>
          <input type="text" name="addressLin2" placeholder="Enter Address Line 2" class="form-control"  ng-model="com.addressLin2">
          </div> 
          <div class="col-sm-3">
          
          <label class="">Address Line 3</label>
          <input type="text" name="addressLin3" placeholder="Enter Address Line 3" class="form-control"  ng-model="com.addressLin3">
          </div>
           <div class="col-sm-3">
        
          <label class="">Post Code<span style="color:red;">*</span></label>
          <input type="text" name="postCode" placeholder="Enter Post Code" class="form-control"  ng-model="com.postCode" ng-required="true">

               <div ng-show="form.$submitted || form.postCode.$touched">
                <span style="color:orange" ng-show="form.postCode.$error.required"> Please Enter PostCode</span>
            </div>             

          </div>

        </div><!-- End of 3rd col 12 -->

        <div class="col-sm-12"><!-- Start of 4th col 12 -->

          <div class="col-sm-3">
         
          <label class="">Contact Number<span style="color:red;">*</span></label>

          <div class="input-group">
       <span class="input-group-addon" style="background: #fff; border-left: none;margin-top: -1px">{{countryCallingCodes}} </span>
          <input type="number" min="0" name="contact" placeholder="Enter Contact" class="form-control"  ng-model="com.contact" ng-required="true">
     
    </div>





               <div ng-show="form.$submitted || form.contact.$touched">
                <span style="color:orange" ng-show="form.contact.$error.required"> Please Enter Contact no</span>
            </div>  

          </div> 



          <div class="col-sm-3">
       
          <label class="">Fax</label>
         
               <div class="input-group">
                  <span class="input-group-addon" style="background: #fff; border-left: none;margin-top: -1px">{{countryCallingCodes}} </span>
                 <input type="text" name="fax" placeholder="Enter Fax" class="form-control"  ng-model="com.fax" >
            </div>
          </div> 

          <div class="col-sm-3">
         
          <label class="">Email<span style="color:red;">*</span></label>
         <input type="email" name="emailId" placeholder="Enter Email" class="form-control"  ng-model="com.email" ng-required="true">


        
              <div ng-show="form.$submitted || form.emailId.$touched">
                <span style="color:orange" ng-show="form.emailId.$error.required"> Please Enter EmailId </span>
              <span style="color:orange" class="error" ng-show="form.emailId.$error.email">Not valid email!</span>
               </div>

          </div> 
          <div class="col-sm-3">
         
          <label class="">Website<span style="color:red;">*</span></label>

  <div class="input-group">
      <input type="url" name="website" placeholder="Enter Website" class="form-control" ng-model="com.website" ng-required="true" style="border-right: none">
      <span class="input-group-addon glyphicon glyphicon-info-sign" data-toggle="tooltip" title=" http://xyz OR https://xyz" style="background: #fff; border-left: none;margin-top: -1px"> </span>
    </div>
          

             <div ng-show="form.$submitted || form.website.$touched">
                <span style="color:orange" ng-show="form.website.$error.required"> Please Enter WebSite</span>
                 <span style="color:orange" ng-show="form.website.$error.url"> WebSite Not valid</span>
            </div> 

          </div> 

        </div><!-- End of 4th col 12 -->


      </div><!-- End of row -->
     </div><!-- End of container fluids -->



      <div class="container-fluid jumbotron mappfull"><!-- Start of contaner fluid -->
        <div class="row"><!-- Start of row -->
  
          <div class="col-sm-6">
			<div class="col-sm-12"  style="background: #cfdff9;"><label class="">Business Unit</label></div>
           	<div class="col-sm-12"  ng-repeat="x in busRow" >
           	
           		<div class="col-sm-12"><label>Name<span style="color:red;">*</span></label></div>
           		<div class="col-sm-6" >
           			
           			
          			<input type="text"  placeholder="Enter Business Unit" name="businessunits{{$index}}" class="form-control" ng-model="x.name" ng-required="true">
      			</div>
      			<div class="col-sm-6">      				
      				    <button class="btn btn-success" type="button" ng-click="addBus()">+</button>
      				    <button class="btn btn-warning"  type="button" ng-click="removeBus($index)" ng-disabled="busRow.length==1">-</button>

                   <div ng-show="form.$submitted || form.businessunits{{$index}}.$touched">
                <span style="color:orange" ng-show="form.businessunits{{$index}}.$error.required"> Please Enter BusinesUnit</span>
                  </div> 

      				
      			</div>     			
           	</div>
       

           </div><!-- End of col-6 -->
        </div><!-- End of row -->


        <div class="row">
           <div class="col-sm-6"><br>
			<div class="col-sm-12" style="background: #cfdff9;"><label class="">Department</label></div>

           	<div class="col-sm-12"  ng-repeat="x in depRow">
           		
           		<div class="col-sm-12"><label>Name<span style="color:red;">*</span></label></div>
           		<div class="col-sm-6" >
           			
          			<input type="text" name="depRow{{$index}}" placeholder="Enter Department Name" class="form-control" ng-model="x.name" ng-required="true">


                   <div ng-show="form.$submitted || form.depRow{{$index}}.$touched">
                <span style="color:orange" ng-show="form.depRow{{$index}}.$error.required"> Please Enter Department</span>
                  </div> 

      			</div>
      			<div class="col-sm-6">      				
      				    <button class="btn btn-success" type="button" ng-click="addDep()">+</button>
      				    <button class="btn btn-warning" type="button" ng-click="removeDep($index)" ng-disabled="depRow.length==1">-</button>      				
      			</div>     			
           	</div>
       

           </div><!-- End of col-6 -->
         </div><!-- End of row -->


      </div><!-- End of container fluid -->


      <div class="container-fluid jumbotron fontSize" style="padding-left:20px;padding-right: 20px">
          <div class="row">
          <div class="col-sm-6"></div>
          <div class="col-sm-6">
            

              <button id="sub" class="form-control btn-success pull-right" style="margin-top:0px; margin-bottom: 20px; width:100px;margin-right: 30px; " align="center" type="button" ng-click="sub()" ng-disabled="form.$invalid">Submit</button>

            <button  type="button" id="close" class="form-control clo  pull-right btn btn-primary"  style="margin-top:0px; margin-bottom: 20px; width:100px;margin-right: 40px;  " align="center" >Cancel</button>

          
            
          </div>
          </div>
        </div>
        
    </div>


       <div class="container-fluid jumbotron mappfull tab-pane fade" id="data"><!-- Start of 2nd tab -->
         <div class="row">
          


                   <div class="col-sm-12"><!-- Stat of col 12 -->
            
          <div class="col-sm-3">
         
          <label class="">Default currency<span style="color:red;">*</span></label>
         <input type="text" ng-model="currencyName" name="" class="form-control" readonly style="background: #fff">

              <!--  <div ng-show="form.$submitted || form.defaultCurrency.$touched">
                <span style="color:orange" ng-show="form.defaultCurrency.$error.required"> Please Select Default currency</span>
            </div>  -->

          </div> 
          <div class="col-sm-3">
         
          <label class="">Default date format<span style="color:red;">*</span></label>
           <select class="form-control" id="date" ng-model="defaultDateFormat" name="defaultDateFormat" ng-required="true">
            <option value="">Select Date Format</option>
            <option> mm-dd-yyyy</option>
            <option> mm/dd/yyyy</option>
            <option>dd-mm-yyyy</option>
            <option>dd/mm/yyyy</option>
            <option>yyyy-mm-dd</option>
            <option>yyyy/mm/dd</option>
          </select>


               <div ng-show="form.$submitted || form.defaultDateFormat.$touched">
                <span style="color:orange" ng-show="form.defaultDateFormat.$error.required"> Please Select default DateFormat</span>
            </div> 

          </div> 
          <div class="col-sm-3">
        
          <label class="">Decimal Point<span style="color:red;">*</span></label>
           <select class="form-control"  ng-model="decimalPoint" name="decimalPoint" ng-required="true"><option value="">Select Decimal Point</option><option value="1"> Dot ( . )</option><option value="2">Comma ( , )</option></select>

            <div ng-show="form.$submitted || form.decimalPoint.$touched">
                <span style="color:orange" ng-show="form.decimalPoint.$error.required"> Please Select decimal point</span>
            </div> 


          </div> 
          <div class="col-sm-3">
        
          <label class=""  >decimal Position<span style="color:red;">*</span></label>
          <input type="text" name="" placeholder="Enter Ddecimal Position" class="form-control" ng-model="decimalPosition" name="decimalPosition" ng-required="true">

           <div ng-show="form.$submitted || form.decimalPosition.$touched">
                <span style="color:orange" ng-show="form.decimalPosition.$error.required"> Please Select decimal point</span>
            </div> 

          </div> 
          </div><!-- End of col 12 -->
          
          <div class="col-sm-12"><!-- Start of col 12 -->
            <div class="col-sm-3">
            
              <label class="">Default Time Zone<span style="color:red;">*</span></label>
                      <input type="text" class="form-control" id="timezone"  ng-model="defaultTimeZone.text" name="defaultTimeZone" ng-required="true" readonly style="background: #fff">
                      

                        <div ng-show="form.$submitted || form.defaultTimeZone.$touched">
                           <span style="color:orange" ng-show="form.defaultTimeZone.$error.required"> Please Select default Time zone</span>
                        </div> 


            </div>
            <div class="col-sm-2">
            
              <label class="">Fical Year Start<span style="color:red;">*</span></label>
              <select class="form-control"  ng-model="ficalYrStart" name="ficalYrStart" ng-required="true">
    <option value=''>--Select Month--</option>
    <option selected value='1'>Janaury</option>
    <option value='2'>February</option>
    <option value='3'>March</option>
    <option value='4'>April</option>
    <option value='5'>May</option>
    <option value='6'>June</option>
    <option value='7'>July</option>
    <option value='8'>August</option>
    <option value='9'>September</option>
    <option value='10'>October</option>
    <option value='11'>November</option>
    <option value='12'>December</option>
    </select> 

       <div ng-show="form.$submitted || form.ficalYrStart.$touched">
                           <span style="color:orange" ng-show="form.ficalYrStart.$error.required"> Please Select default Time zone</span>
                        </div> 
            </div>
          </div><!-- End of col 12 -->
         </div><!-- End of row -->
       </div><!-- End of 2nd tab -->


</form>

       
    </div><!-- End of tab container -->




        </section>





       
    
  </div>
</div>



<div id="errormsg"  style="color:red; text-align: center; font-size: 25px;"></div>



<div class="message"></div>

<script>
$(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip();   
});
</script>

 <script type="text/javascript">
           
$(".clo").click(function(){
//  alert("going to close");
  window.parent.closeModal();
});
         </script>




<!-- 
  <script src="country.js"></script>
<script src="timeZone.js"></script> -->
<!-- <script src="js/states.json"></script>
<script src="js/countryDetails.json"></script>
<script src="js/countries.json"></script> -->

<script type="text/javascript">
	 $(".clo").click(function(){
//  alert("going to close");
  window.parent.closeModal();
});
    
function split_key(key)
{
  var arr=[];
  var temp=key.split("&");
  for(var i=0;i<temp.length;i++)
    {
     var key=temp[i].split("=");
     arr.push(key[1]);
    }
 
  return arr;
}
var url_loc=decodeURIComponent(window.location.search);
var arr=split_key(url_loc);

var sessionId=arr[0];

 //console.log(country_arr)
  $(".document").load("html/document.html");
$(".notes").load("html/notes.html");
$(".history").load("html/history.html");
$(".message").load("html/messageAlert.html");


angular.module('myApp', [])
  .controller('ngCntrl', function($scope,$http) {


/*$scope.countryList=country_arr;*/



/*Start of geting countries AND details*/


   $http({
        method : "GET",
        url : "/actnow-claims-1.0.0/entry/js/countries.json"
    }).then(function mySuccess(response) {

     
      $scope.countryData=response.data.countries;
       //console.log($scope.countryData);

      $http({
        method : "GET",
        url : "/actnow-claims-1.0.0/entry/js/states.json"
    }).then(function mySuccess(response) {

      
      $scope.stateData=response.data;
     // console.log($scope.stateData);

          $http({
        method : "GET",
        url : "/actnow-claims-1.0.0/entry/js/countryDetails.json"
    }).then(function mySuccess(response) {

      $scope.countryDetails=response.data;
//console.log($scope.countryDetails);
         $http({
        method : "GET",
        url : "/actnow-claims-1.0.0/entry/js/Common-Currency.json"
    }).then(function mySuccess(response) {

      
      $scope.currencyDetails=response.data;
//console.log($scope.currencyDetails);

  $http({
        method : "GET",
        url : "/actnow-claims-1.0.0/entry/js/countrycodeWithZone.json"
    }).then(function mySuccess(response) {

      
      $scope.countrycodeWithZone=response.data.countries;
//console.log($scope.countrycodeWithZone);
$http({
        method : "GET",
        url : "/actnow-claims-1.0.0/entry/js/timezones.json"
    }).then(function mySuccess(response) {

      $scope.timezones=response.data;
//console.log($scope.timezones);
      },   
     function myError(response) {
      console.log(response);
    }); 

      },   
     function myError(response) {
      console.log(response);
    }); 

      },   
     function myError(response) {
      console.log(response);
    }); 
      },   
     function myError(response) {
      console.log(response);
    }); 
      },   
     function myError(response) {
      console.log(response);
    });     
      },   
     function myError(response) {
      console.log(response);
    });     



/*End of geting Country and Details */







/*

console.log($scope.countryList);

$scope.timeZoneList=timeZone;

console.log($scope.timeZoneList)*/


$scope.countrySelect=function(dat){
 /* $scope.ind=parseInt(dat);

  $scope.stateList=s_a[$scope.ind+1].split("|");
  console.log($scope.stateList);*/
  var data=JSON.parse(dat);
  //console.log(data);
  $scope.countryCode=data.sortname;
  $scope.countryId=data.id;

console.log($scope.countryId);


 // console.log($scope.stateData);
$scope.stateShow=[];
  angular.forEach($scope.stateData.states,function(valState,keyState){

    
    if(valState.country_id==$scope.countryId)
    {
      console.log(valState);
      $scope.stateShow.push(valState);
    }
      
   
  })
  //console.log($scope.stateShow)


  angular.forEach($scope.countryDetails,function(val,key){

    if(val.alpha2==$scope.countryCode)
    {
     // console.log(val);
      $scope.countryCallingCodes=val.countryCallingCodes[0];
      $scope.currencyCode=val.currencies[0];
    }
  })
  //console.log($scope.countryCallingCodes);

  //console.log($scope.currencyDetails);

  angular.forEach($scope.currencyDetails,function(val,key){

      if(val.code==$scope.currencyCode)
      {
        $scope.currencyName=val.name;
      }

  })


    var countrytime=$scope.countrycodeWithZone[$scope.countryCode].zones;
  //  console.log(countrytime);

    //console.log($scope.timezones);

angular.forEach(countrytime,function(val,key){

      angular.forEach($scope.timezones,function(timval,timkey){

        if(timval.utc.includes(val))
        {
         // console.log(timval);
          $scope.defaultTimeZone=timval;

        }
      })
})


}







$scope.dep={};
$scope.bus={};
$scope.com={};
function uuidv4() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
              var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
              return v.toString(16);
            });
          }

          
          /*Start of business unit and dep row*/
$scope.depRow=[{}];
$scope.addDep=function(){
	
	$scope.depRow.push({});
}

$scope.removeDep=function(x){

	$scope.depRow.splice(x,1);
}
        

$scope.busRow=[{}];
$scope.addBus=function(){
	
	$scope.busRow.push({});
}

$scope.removeBus=function(x){

	$scope.busRow.splice(x,1);
}
        
/*End of business unit and dep row*/


$scope.sub=function(){
	
 $scope.uuid=uuidv4();

$scope.comData={
      
       "parentCompny": $scope.com.parentCompny,
       "company": $scope.com.company,
       "alias": $scope.com.alias,
       "leglEntity": $scope.com.leglEntity,
       "country":JSON.parse( $scope.country).name,
       "state": JSON.parse($scope.state).name,
       "addressLin1": $scope.com.addressLin1,
       "addressLin2": $scope.com.addressLin2,
       "addressLin3": $scope.com.addressLin3,
       "postCode": parseInt($scope.com.postCode),
       "contact": $scope.countryCallingCodes+"_"+$scope.com.contact,
       "uniqueId": $scope.uuid,
       "fax":$scope.countryCallingCodes+"_"+$scope.com.fax,
       "email": $scope.com.email,
       "website": $scope.com.website,
       "defaultCurrency": $scope.currencyName,
       "defaultDateFormat": $scope.defaultDateFormat,
       "decimalPoint": $scope.decimalPoint,
       "decimalPosition":$scope.decimalPosition,
       "defaultTimeZone": $scope.defaultTimeZone.value,
       "ficalYrStart": $scope.ficalYrStart
   };



$scope.depData=[];
angular.forEach($scope.depRow,function(value,key){

  var tempDep={
    "name": value.name,
    "uniqueId":$scope.uuid
 };

$scope.depData.push(tempDep);
});

$scope.busData=[];

angular.forEach($scope.busRow,function(value,key){

  var tempBus={
      
      "name": value.name,
       "costCentre": 89,
       "uniqueId":$scope.uuid
   };

$scope.busData.push(tempBus);
});

   


console.log($scope.comData);
/*console.log($scope.busData);
console.log($scope.depData);*/



var companypost=JSON.stringify($scope.comData, null, "\t");
var buspost=JSON.stringify($scope.busData, null, "\t");
var deppost=JSON.stringify($scope.depData, null, "\t");
console.log(companypost);
console.log(deppost);
console.log(buspost);


$("#loading").css("display","block");
 $http({
        method : "POST",
         url: "/actnow-claims-1.0.0/actnow/companies",
        data:companypost,

 headers: { 'Content-Type': 'application/json'}

       
    }).then(function mySuccess(response) {
        console.log("Success full insert COMPANY"+response);






 $http({                  /*Start of post busPost*/
        method : "POST",
         url: "/actnow-claims-1.0.0/actnow/businessunits",
        data:buspost,

 headers: { 'Content-Type': 'application/json'}

       
    }).then(function mySuccess(response) {
        console.log("Success full insert Business"+response);






            $http({                 /*Start of post depPost*/
        method : "POST",
         url: "/actnow-claims-1.0.0/actnow/department",
        data:deppost,

 headers: { 'Content-Type': 'application/json'}

       
    }).then(function mySuccess(response) {
        console.log("Success full insert Department"+response);


$("#loading").css("display","none");

window.parent.moveTop();
            $(".modal-body-result").html("<div class='alert alert-success'> <strong> Submission successfully</strong></div>");
                    $("#myModal3").modal();
                       $(".clo-message").on("click",function(){
                         window.parent.closeModal();
                       })
        
    },    /*maIN SUCCESS END HERE*/



     function myError(response) {
      console.log(response);
        // alert("Failed t insert COMPANY"+response)

$("#loading").css("display","none");
window.parent.moveTop();
           $(".modal-body-result").html("<div class='alert alert-danger'> <strong> Submission Failed</div>");
                    $("#myModal3").modal();
                    $(".clo-message").on("click",function(){
                         window.parent.closeModal();
                       })

    });                       /*ENd of post depPost*/ 





        
    }, function myError(response) {
      console.log(response);
      $("#loading").css("display","none");

       //  alert("Failed t insert Business"+response);
       window.parent.moveTop();
         $(".modal-body-result").html("<div class='alert alert-danger'> <strong> Submission Failed</div>");
                    $("#myModal3").modal();
                    $(".clo-message").on("click",function(){
                         window.parent.closeModal();
                       })
    });                   /*End of post buspost*/






    }, function myError(response) {
      console.log(response);
      $("#loading").css("display","none");

        // alert("Failed t insert Department"+response);
        window.parent.moveTop();
           $(".modal-body-result").html("<div class='alert alert-danger'> <strong> Submission Failed</div>");
                    $("#myModal3").modal();
                    $(".clo-message").on("click",function(){
                         window.parent.closeModal();
                       })
    });/*End of post employee data*/   /*mAIN ERROR END HERE*/


    
         

  
} /*End of sub*/   
  })
 .directive('onlyLettersInput', function(){

      return {
        require: 'ngModel',
        link: function(scope, element, attr, ngModelCtrl) {
          function fromUser(text) {
            var transformedInput = text.replace(/[^a-zA-Z]/g, '');
            //console.log(transformedInput);
            if (transformedInput !== text) {
              ngModelCtrl.$setViewValue(transformedInput);
              ngModelCtrl.$render();
            }
            return transformedInput;
          }
          ngModelCtrl.$parsers.push(fromUser);
        }
      };

    });


</script>


















</body>
</html>


 